# 素数

* 所有大于2的素数都可以唯一地表示成两个平方数之差。

* 当n为大于2的整数时，$2^n+1$和$2^n-1$两个数中，如果其中一个数是素数，那么另一个数一定是合数。

* 孪生素数：3和5等。

## 素性检测

* 结合哥德巴赫猜想，两个大于2的偶数=两个质数相加(偶数的范围可以达到$10^{18}$) 当质数很大，难用常规方法判断。

```c++
  typedef unsigned long long ll;
  //ll*ll可能会溢出，所以乘法化加法
  ll ModMul(ll a,ll b,ll n)//快速积取模 a*b%n
  {
      ll ans=0;
      while(b)
      {
          if(b&1)
            ans=(ans+a)%n;
          a=(a+a)%n;
          b>>=1;
      }
      return ans;
  }
  ll ModExp(ll a,ll b,ll n)//快速幂取模 a^b%n
  {
      ll ans=1;
      while(b)
      {
          if(b&1)
            ans=ModMul(ans,a,n);
          a=ModMul(a,a,n);
          b>>=1;
      }
      return ans;
  }
  bool miller_rabin(ll n)//Miller-Rabin素数检测算法
  {
      ll i,j,a,x,y,t,u,s=10;
      if(n==2)
        return true;
      if(n<2||!(n&1))
        return false;
      for(t=0,u=n-1;!(u&1);t++,u>>=1);//n-1=u*2^t
      for(i=0;i<s;i++)
      {
          a=rand()%(n-1)+1;
          x=ModExp(a,u,n);
          for(j=0;j<t;j++)
          {
              y=ModMul(x,x,n);
              if(y==1&&x!=1&&x!=n-1)
                return false;
              x=y;
          }
          if(x!=1)
            return false;
      }
      return true;
  }
```

# 对数的敏感性

* log(2)=0.693147

* $sqrt(2)=1.414$ $sqrt(3)=1.732$

* 被9整除 $k*(10^x-1)$

# 调和级数 欧拉公式

* 在n较小的时候没有公式，当n较大(大于一万)

  $f(n)=ln(n)+C+1/(2*n)$ 
 
  $C≈0.57721566490153286060651209$ 

  ```c++
  //对数函数y = lnx的表示方法为log
  f=C+log(n)+1.0/(2.0*n);
  ```

# RSA

* 选取大素数p、q，计算乘积n=p*q

* 根据欧拉函数$r=Phi(n)=Phi(p)*Phi(q)=(p-1)*(q-1)$

* 选择一个小于r并与r互质的整数e，求得e关于r的模反元素，命名为d（ed = 1(mod r)模反元素存在，当且仅当e与r互质），e我们通常取65537。

* e、n公开，d私钥。

    ​A明文，B密文 
    
    $A=B^d mod n$ 

    $B=A^e mod n$
